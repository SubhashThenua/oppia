<div class="learner-story-summary-tile">
  <mat-card class="oppia-story-dashboard-card" [attr.style]="isButtonHovered()">
        <div class="oppia-title-section" [ngStyle]="{'background-color': thumbnailBgColor}">
          <div class="oppia-story-tags">
            <span *ngIf="true" class="oppia-learnergroup-title-tag">
              <img [src]="learnerGroupImageUrl" alt="learnergroup image">
              <span>
                {{ learnerGroupTitle }}
              </span>
            </span>
            <span *ngIf="markTileAsGoal" class="oppia-goal-tag">
                <img [src]="todolistImageUrl" alt="todolist image" class="oppia-goal-svg-image">
                <span>Goals</span>
            </span>
          </div>
          <img class="oppia-thumbnail-image" alt="" [src]="thumbnailUrl" [attr.style]="isButtonHovered()">
        </div>
        <div class="oppia-summary-section">
          <div class="next-incomplete-chapter" *ngIf="isDisplayAreaHome()">
            {{nextIncompleteNodeTitle}}
          </div>
          <div class="oppia-topic-title e2e-test-topic-name-in-learner-story-summary-tile">
            {{topicName}}
          </div>
          <div class="oppia-story-title e2e-test-story-name-in-learner-story-summary-tile">
            {{storyTitle}}
          </div>
        </div>
      <div class="story-card-footer">
        <span class="story-progress">
          <svg class="story-progress-svg" width="50" height="50">
            <circle class="story-progress-circle total-circle"
                    cx="25"
                    cy="25"
                    r="18"/>
            <circle class="story-progress-circle completed-circle"
                    cx="25"
                    cy="25"
                    r="18"
                    [ngStyle]="{'stroke-dashoffset': getStrokeDashOffSet,'stroke-dasharray': circumference}"/>
            <text x="25"
                  y="-20"
                  text-anchor="middle"
                  stroke="#00645c"
                  stroke-width="0.5"
                  font-size="0.9em"
                  transform="rotate(90)">
              {{ storyProgress }}%
            </text>
          </svg>
        </span>
        
        <span class="continue-button" *ngIf="isDisplayAreaHome()" (mouseenter)="buttonIsHovered=true" (mouseleave)="buttonIsHovered=false">
          <a [href]="getStoryLink()" target="{{ openInNewWindow ? '_blank' : '_self' }}" class="oppia-story-link">
          <p *ngIf="storyProgress !== 0" class="button-text">
            Resume
          </p>
          <p *ngIf="storyProgress === 0" class="button-text">
            Start
          </p>
          </a>
        </span>
      </div>
  </mat-card>
</div>
<style>

  .learner-story-summary-tile .story-progress-svg {
    transform: rotate(-90deg);
  }

  .learner-story-summary-tile .story-progress-circle {
    fill: none;
  }

  .learner-story-summary-tile .total-circle {
    stroke: #adadad;
    stroke-width: 3;
  }

  .learner-story-summary-tile .completed-circle {
    stroke: #00645c;
    stroke-width: 3;
  }

  .learner-story-summary-tile .story-progress {
    position: relative;
    top: 99px;
  }
  .learner-story-summary-tile .oppia-story-title {
    color: #333;
    display: inline-block;
    font-size: 11px;
    height: 40px;
    letter-spacing: 0;
    margin: 0px 8px 0 8px;
    opacity: 1;
    text-align: left;
  }
  .learner-story-summary-tile .next-incomplete-chapter {
    color: #00645C;
    font-family: Capriola,Roboto,Arial,sans-serif;
    font-size: 15px;
    font-weight: 400;
    padding-left: 8px;
    text-align: left;
  }
  .learner-story-summary-tile .continue-button {
    background: white 0% 0% no-repeat padding-box;
    border: 1px solid #00645C;
    border-radius: 4px;
    bottom: 7px;
    height: 36px;
    left: 86px;
    position: absolute;
    width: 122px;
  }
  .learner-story-summary-tile .button-text {
    color: #00645C;
    font-size: 14px;
    font-weight: 500;
    left: 1px;
    letter-spacing: 0;
    position: relative;
    text-align: center;
    top: 10px;
  }
  .learner-story-summary-tile .story-completion {
    bottom: 52px;
  }
  .learner-story-summary-tile .oppia-svg-star-image {
    bottom: 3px;
    filter: invert(95%) sepia(49%) saturate(2374%) hue-rotate(320deg) brightness(91%) contrast(89%);
    left: 3px;
    position: relative;
    width: 11px;
  }
  .learner-story-summary-tile .oppia-story-link {
    text-decoration: none;
  }
  .learner-story-summary-tile .story-card {
    height: 100%;
  }
  .learner-story-summary-tile .oppia-summary-section {
    position: absolute;
    width: 100%;
    margin-top: 8px;
  }
  .learner-story-summary-tile .oppia-topic-title {
    color: #333;
    display: block;
    font-family: 'Roboto';
    font-size: 12px;
    font-weight: 600;
    height: 16px;
    letter-spacing: 0.05px;
    margin: 4px 8px 0px 8px;
    padding-bottom: 12px;
    text-align: left;
    text-transform: uppercase;
    width: 188px;
  }
  .learner-story-summary-tile .oppia-story-completed-percent {
    color: #fff;
    font-size: 10px;
    letter-spacing: 0;
    margin: 2px;
    padding: 2px;
    position: absolute;
    width: 100%;
  }
  .learner-story-summary-tile .oppia-percent-story-completed {
    color: #fff;
    font-size: 10px;
    letter-spacing: 0;
    margin: 2px;
    padding: 2px;
    position: absolute;
    width: 100%;
  }
  .learner-story-summary-tile .oppia-story-dashboard-card {
    border-radius: 4px;
    box-shadow: 0 3px 6px #00000029;
    display: inline-block;
    height: 286px;
    margin: 0 2px 1px 6px;
    padding: 0;
    position: relative;
    width: 216px;
    z-index: 5;
  }
  .learner-story-summary-tile .oppia-title-section {
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    height: 136px;
    width: 216px;
  }
  .learner-story-summary-tile .oppia-thumbnail-image {
    height: 136px;
    width: 216px;
  }
  .learner-story-summary-tile .oppia-story-dashboard-card .continue-button:hover {
    background-color: #35ada3;
  }
  .learner-story-summary-tile .story-card-footer {
    display: flex;
  }
  .learner-story-summary-tile .oppia-goal-tag,
  .learner-story-summary-tile .oppia-learnergroup-title-tag {
    display: flex;
    align-items: center;
    gap: 4px;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.60);
    backdrop-filter: blur(2px);
    color: #333;
    font-size: 12px;
    font-weight: 500;
    line-height: 13px;
    padding: 2px 4px;
    text-transform: capitalize;
  }
  .learner-story-summary-tile .oppia-story-tags {
    display: grid;
    gap: 4px;
    position: absolute;
    left: 8px;
    top: 8px;
  }
  .learner-story-summary-tile .oppia-goal-tag {
    width: 64px;
  }
  .learner-story-summary-tile .oppia-learnergroup-title-tag {
    width: 200px;
  }
  .learner-story-summary-tile .oppia-svg-image {
    height: 20px;
    width: 20px;
  }
  .learner-story-summary-tile .oppia-goal-svg-image {
    filter: invert(27%) sepia(108%) saturate(4263%) hue-rotate(500deg) brightness(60%) contrast(131%);
  }
</style>